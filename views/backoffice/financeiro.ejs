<!-- Wappler include head-page="layouts/backoffice" fontawesome_5="cdn" bootstrap5="local" is="dmx-app" id="financeiro" appConnect="local" bootstrap_icons="cdn" components="{dmxBootstrap5Offcanvas:{},dmxBootstrap5TableGenerator:{},dmxFormatter:{}}" -->
<dmx-serverconnect id="listarLancamentos" url="/api/financeiro/listar-lancamentos" dmx-param:idempresalancamentosatual="usuarioLogado.data.queryIdentificarUsuario.empresa_selecionada"></dmx-serverconnect>
<div class="offcanvas offcanvas-end w-50" id="cadastrarOffcanvasLancamento" is="dmx-bs5-offcanvas" tabindex="-1">
    <div class="offcanvas-header border-bottom border-light-subtle">
        <h5 class="offcanvas-title">Adicionar novo lançamento</h5>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
        <form id="cadastrarFormLancamento" is="dmx-serverconnect-form" method="post" action="/api/financeiro/criar-lancamento" dmx-on:error="alertas.danger('Ocorreu um erro: '+cadastrarOffcanvasLancamento.cadastrarFormLancamento.lastError.status+cadastrarOffcanvasLancamento.cadastrarFormLancamento.lastError.message+cadastrarOffcanvasLancamento.cadastrarFormLancamento.lastError.response+'. Entre em contato com o suporte.');cadastrarOffcanvasLancamento.hide();cadastrarFormLancamento.reset()" dmx-on:success="cadastrarFormLancamento.reset();cadastrarOffcanvasLancamento.hide();listarLancamentos.load({idempresalancamentosatual: usuarioLogado.data.queryIdentificarUsuario.empresa_selecionada});alertas.success('Lançamento cadastrado com sucesso!')">
            <div>
                <input type="hidden" class="form-control" id="idEmpresaAtual" name="idEmpresaAtual" aria-describedby="input1_help" placeholder="Enter some text" dmx-bind:value="usuarioLogado.data.queryIdentificarUsuario.empresa_selecionada">
            </div>

            <div class="row">
                <div class="col">
                    <div class="form-group mb-3"> <label for="inputValorLiquido" class="form-label">Tipo de lançamento</label>
                        <select id="selectTipoLancamento" class="form-select select-form" name="selectTiselectTipoLancamentopo">
                            <option value="">Selecione o tipo</option>
                            <option value="Receita">Receita</option>
                            <option value="Despesa">Despesa</option>
                            <option value="Transferência">Transferência</option>
                            <option value="Investimento">Investimento</option>
                            <option value="Reembolso">Reembolso</option>
                            <option value="Empréstimo">Empréstimo</option>
                            <option value="Juros/Multas">Juros/Multas </option>
                        </select>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group mb-3"> <label for="inputValorLiquido" class="form-label">Categoria</label>
                        <select id="selectCategoriaLancamento" class="form-select select-form" name="selectCategoriaLancamento">
                            <option value="">Selecione o tipo</option>
                            <option value="Salário">Salário</option>
                            <option value="Fornecedor">Fornecedor</option>
                            <option value="Impostos e Taxas">Impostos e Taxas</option>
                            <option value="Serviços">Serviços</option>
                            <option value="Aluguel">Aluguel</option>
                            <option value="Marketing/Publicidade">Marketing/Publicidade</option>
                            <option value="Assinaturas/Softwares">Assinaturas/Softwares</option>
                            <option value="Comissões">Comissões</option>
                            <option value="Manutenção">Manutenção</option>
                            <option value="Vendas e Serviços">Vendas e Serviços</option>
                            <option value="Investimentos">Investimentos</option>
                            <option value="Juros/Multas">Juros/Multas</option>
                            <option value="Reembolsos">Reembolsos</option>
                            <option value="Outros">Outros</option>
                        </select>
                    </div>
                </div>
            </div>





            <div class="row">
                <div class="col">
                    <div class="form-group mb-3"> <label for="inputValorLiquido" class="form-label">Valor liquido</label>
                        <input type="number" class="form-control" id="inputValorLiquido" name="inputValorLiquido" aria-describedby="input1_help">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group mb-3"> <label for="inputDataVencimento" class="form-label">Vencimento</label>
                        <input type="date" class="form-control" id="inputDataVencimento" name="inputDataVencimento" aria-describedby="input1_help">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col">

                    <div class="form-group mb-3"> <label for="inputValorLiquido" class="form-label">Forma de Pagamento</label>
                        <select id="selectFormaPagamento" class="form-select select-form" name="selectFormaPagamento">
                            <option value="">Selecione a forma de pagamento</option>
                            <option value="Boleto">Boleto</option>
                            <option value="Cartão de Crédito">Cartão de Crédito</option>
                            <option value="Cartão de Débito">Cartão de Débito</option>
                            <option value="PIX">PIX</option>
                            <option value="Transferência Bancária">Transferência Bancária</option>
                            <option value="Dinheiro">Dinheiro</option>
                            <option value="Outro">Outro</option>
                        </select>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group mb-3"> <label for="inputDataVencimento" class="form-label">Status Inicial</label>
                        <select id="selectStatusLancamento" class="form-select select-form" name="selectStatusLancamento">
                            <option value="" disabled>Selecione o status</option>
                            <option value="Pendente">Pendente</option>
                            <option value="Pago">Pago</option>
                            <option value="Parcialmente Pago">Parcialmente Pago</option>
                            <option value="Cancelado">Cancelado</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col">

                    <div class="form-group mb-3"> <label for="inputValorLiquido" class="form-label">Parcelamento</label>
                        <input id="inputParcelamento" name="inputParcelamento" type="text" class="form-control">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group mb-3"> <label for="input3" class="form-label">Comprovante</label>
                        <input id="fileComprovante" name="fileComprovante" type="file" class="form-control">
                    </div>
                </div>
            </div>
            <div class="form-group mb-3"> <label for="input3" class="form-label">Observações</label>
                <textarea id="textObservacao" class="form-control" name="textObservacao"></textarea>
            </div>
        </form>
    </div>
    <div class="d-flex flex-row py-3 border-top border-light-subtle justify-content-center"><button id="btn4" class="btn btn-primary btn-custom" dmx-on:click="cadastrarFormLancamento.submit()">Cadastrar lançamento</button></div>
</div>
<meta name="ac:route" content="/b/financeiro">
<div class="container-fluid mb-3 py-3 px-0">
    <div class="row">
        <div class="col text-start align-self-center">
            <div class="d-flex flex-row align-items-center justify-content-start">
                <img src="/assets/duotune/gen001.png" width="16" height="16" class="img-fluid me-2">
                <img src="/assets/duotune/arr023.png" width="12" height="12" class="me-2">
                <h6 class="m-0 subtitulos-pagina">Financeiro</h6>

            </div>
            <h5 class="mt-1">Suas movimentações financeiras</h5>
        </div>
        <div class="col text-end align-self-center">
            <button id="btn1" class="btn btn-custom btn-primary" data-bs-toggle="offcanvas" data-bs-target="#cadastrarOffcanvasLancamento">Novo lançamento</button>
        </div>
    </div>


</div>
<div class="container-fluid p-4 border border-light-subtle rounded-4 bg-white text-center" dmx-show="listarLancamentos.data.queryLancamentos.isEmpty()">
    <div class="d-flex flex-column justify-content-center align-items-center">
        <h3 class="text-center mb-3">Você não tem nenhuma movimentação cadastrada</h3>
        <button id="btn2" class="btn btn-custom btn-primary mb-3" data-bs-toggle="offcanvas" data-bs-target="#cadastrarOffcanvasLancamento">Novo lançamento</button><img src="/assets/images/15.png" class="img-fluid" width="280">
    </div>
</div>
<div class="container-fluid p-4 border border-light-subtle rounded-4 bg-white text-center" dmx-show="!listarLancamentos.data.queryLancamentos.isEmpty()">
    <div class="row">
        <div class="col">
            <table class="table">
                <thead>
                    <tr>
                        <th class="text-start">TIPO</th>
                        <th class="text-start">CATEGORIA</th>
                        <th class="text-start">DESCRIÇÃO</th>
                        <th class="text-start">METODO DE PAGAMENTO</th>
                        <th class="text-start">VENCIMENTO</th>
                        <th class="text-start">STATUS</th>
                        <th class="text-start">VALOR</th>
                    </tr>
                </thead>
                <tbody is="dmx-repeat" dmx-generator="bs5table" dmx-bind:repeat="listarLancamentos.data.queryLancamentos" id="tableRepeat2">
                    <tr>
                        <td dmx-text="tipo" class="text-start"></td>
                        <td dmx-text="categoria" class="text-start"></td>
                        <td dmx-text="descricao" class="text-start"></td>
                        <td dmx-text="metodo_pagamento" class="text-start"></td>
                        <td dmx-text="data_vencimento" class="text-start"></td>
                        <td dmx-text="status" class="text-start"></td>
                        <td dmx-text="valor_liquido" class="text-start"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>